<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>wave-interference</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { overflow: hidden; background: #020204; }
    canvas { display: block; }
  </style>
</head>
<body>
<script>
// WAVE INTERFERENCE - Overlapping sine waves creating moir√© patterns
let oscillators = [];
let time = 0;
const OSC_COUNT = 12;

function setup() {
  createCanvas(windowWidth, windowHeight);
  colorMode(HSB, 360, 100, 100, 1);
  
  for (let i = 0; i < OSC_COUNT; i++) {
    oscillators.push({
      x: random(width * 0.2, width * 0.8),
      y: random(height * 0.2, height * 0.8),
      freqX: random(0.01, 0.03),
      freqY: random(0.01, 0.03),
      amp: random(50, 150),
      phase: random(TWO_PI),
      speed: random(0.5, 1.5),
      hue: random(180, 260),
      angle: random(TWO_PI)
    });
  }
}

function draw() {
  background(240, 20, 2, 0.03);
  
  time += 0.016;
  
  // Draw interference field
  loadPixels();
  
  let d = pixelDensity();
  let osc = oscillators;
  
  for (let x = 0; x < width; x += 3) {
    for (let y = 0; y < height; y += 3) {
      let value = 0;
      
      for (let o of osc) {
        let dx = x - o.x;
        let dy = y - o.y;
        let angle = o.angle + atan2(dy, dx);
        let dist = sqrt(dx * dx + dy * dy);
        
        value += sin(dist * o.freqX + time * o.speed + o.phase) * 
                 cos(angle * 2 + time * 0.5) * o.amp;
      }
      
      let normalized = map(value, -osc.length * 100, osc.length * 100, 0, 1);
      let brightness = pow(normalized, 2) * 80;
      let hue = map(normalized, 0, 1, 200, 280);
      
      // Draw point
      noStroke();
      fill(hue, 60, brightness, 0.15);
      rect(x, y, 3, 3);
    }
  }
  
  // Draw oscillator centers
  for (let o of oscillators) {
    let pulse = sin(frameCount * 0.05 + o.phase) * 0.3 + 0.7;
    
    // Outer glow
    noStroke();
    for (let r = 60; r > 0; r -= 10) {
      let alpha = map(r, 0, 60, 0.3, 0) * pulse;
      fill(o.hue, 50, 40, alpha);
      ellipse(o.x, o.y, r * 2);
    }
    
    // Core
    fill(o.hue, 40, 80, 0.8 * pulse);
    ellipse(o.x, o.y, 8);
    
    // Center dot
    fill(0, 0, 100, 0.9);
    ellipse(o.x, o.y, 3);
  }
  
  // Draw connecting lines
  strokeWeight(0.3);
  for (let i = 0; i < oscillators.length; i++) {
    for (let j = i + 1; j < oscillators.length; j++) {
      let o1 = oscillators[i];
      let o2 = oscillators[j];
      let d = dist(o1.x, o1.y, o2.x, o2.y);
      
      if (d < 300) {
        let alpha = map(d, 0, 300, 0.15, 0);
        let avgHue = (o1.hue + o2.hue) / 2;
        
        stroke(avgHue, 40, 50, alpha);
        line(o1.x, o1.y, o2.x, o2.y);
      }
    }
  }
}

function windowResized() {
  resizeCanvas(windowWidth, windowHeight);
}
</script>
</body>
</html>
