<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>oscillating-ropes</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { overflow: hidden; background: #050505; }
    canvas { display: block; }
  </style>
</head>
<body>
<script>
// OSCILLATING ROPES - Intertwined sinusoidal ropes with phase relationships
let ropes = [];
let numRopes = 12;
let time = 0;

function setup() {
  createCanvas(windowWidth, windowHeight);
  colorMode(HSB, 360, 100, 100, 1);
  
  // Create ropes with various configurations
  for (let i = 0; i < numRopes; i++) {
    ropes.push({
      offsetX: random(-200, 200),
      offsetY: random(-200, 200),
      freqX: random(0.01, 0.03),
      freqY: random(0.01, 0.03),
      ampX: random(30, 80),
      ampY: random(30, 80),
      phaseX: random(TWO_PI),
      phaseY: random(TWO_PI),
      hue: random(340, 380) % 360,
      thickness: random(1, 3),
      points: []
    });
  }
}

function draw() {
  background(350, 30, 3, 0.06);
  
  time += 0.02;
  
  // Generate rope paths
  for (let r of ropes) {
    r.points = [];
    
    let startX = width / 2 + r.offsetX;
    let startY = height / 2 + r.offsetY;
    
    // Rope extends from center outward
    for (let t = 0; t < 400; t += 2) {
      let angle = t * 0.02;
      
      let x = startX + cos(angle) * t * 0.5 + 
              sin(t * r.freqX + r.phaseX + time) * r.ampX;
      let y = startY + sin(angle) * t * 0.3 + 
              cos(t * r.freqY + r.phaseY + time * 0.7) * r.ampY;
      
      r.points.push({ x, y, t });
    }
  }
  
  // Draw ropes with layering
  // First pass: glow
  for (let r of ropes) {
    drawRopeGlow(r);
  }
  
  // Second pass: core lines
  for (let r of ropes) {
    drawRopeCore(r);
  }
  
  // Draw intersection points
  drawIntersections();
  
  // Subtle vignette
  drawVignette();
}

function drawRopeGlow(r) {
  noFill();
  
  for (let w = r.thickness * 8; w > r.thickness; w -= 1) {
    let alpha = map(w, r.thickness, r.thickness * 8, 0.3, 0);
    stroke(r.hue, 50, 40, alpha);
    strokeWeight(w);
    
    beginShape();
    for (let p of r.points) {
      vertex(p.x, p.y);
    }
    endShape();
  }
}

function drawRopeCore(r) {
  noFill();
  
  // Main line
  stroke(r.hue, 60, 70, 0.7);
  strokeWeight(r.thickness);
  
  beginShape();
  for (let p of r.points) {
    vertex(p.x, p.y);
  }
  endShape();
  
  // Bright center
  stroke(0, 0, 90, 0.5);
  strokeWeight(r.thickness * 0.3);
  
  beginShape();
  for (let p of r.points) {
    vertex(p.x, p.y);
  }
  endShape();
}

function drawIntersections() {
  // Find and highlight where ropes come close to each other
  strokeWeight(0.5);
  
  for (let i = 0; i < ropes.length; i++) {
    for (let j = i + 1; j < ropes.length; j++) {
      let r1 = ropes[i];
      let r2 = ropes[j];
      
      // Check nearby points
      for (let p1 of r1.points) {
        for (let p2 of r2.points) {
          let d = dist(p1.x, p1.y, p2.x, p2.y);
          
          if (d < 15 && d > 2) {
            // Proximity glow
            let alpha = map(d, 2, 15, 0.3, 0);
            stroke((r1.hue + r2.hue) / 2, 40, 60, alpha);
            line(p1.x, p1.y, p2.x, p2.y);
          }
        }
      }
    }
  }
}

function drawVignette() {
  // Subtle radial gradient effect
  noStroke();
  
  for (let r = 0; r < 500; r += 20) {
    let alpha = map(r, 0, 500, 0, 0.15);
    fill(0, 0, 0, alpha);
    
    let centerX = width / 2;
    let centerY = height / 2;
    
    // Draw arcs around center
    for (let a = 0; a < TWO_PI; a += PI / 8) {
      let x = centerX + cos(a) * r;
      let y = centerY + sin(a) * r;
      ellipse(x, y, 30, 30);
    }
  }
}

function windowResized() {
  resizeCanvas(windowWidth, windowHeight);
}
</script>
</body>
</html>
